import{E as t,l as e,b as s,d as a,w as o,e as i,f as l,s as n,g as r,i as c,j as d,m as u,h,o as v,k as p,n as _,p as w,q as m,t as g,u as f,v as y}from"./79e9dae8.js";const b={url:new URL("./src/services/coronastatusService.js",document.baseURI).href};new class extends t{async getCoronaStatus(t){return!t&&this.__coronastatus||(this.__coronastatus=fetch(new URL("../../data/coronastatus.json",b.url)).then(t=>t.json()),await this.__coronastatus,this.dispatchEvent(new Event("change"))),this.__coronastatus}};const L=new class extends t{constructor(){super(),this.cache={}}async getCountry(t){var e;let{iso2:s}=t;if(s=encodeURI(s),/^[a-zA-Z]{2}$/.test(s)){if(t.forceRefresh||this._shouldInvalidate()||"failed"===(null===(e=this.cache[s])||void 0===e?void 0:e.status)||!this.cache[s]){try{var a,o,i,l,n,r;this.cache[s]={};const t=await(await fetch("https://api.coronatracker.com/v3/stats/worldometer/country?countryCode="+s)).json();return this.cache[s]={status:"success",totalConfirmed:null!==(a=null===(o=t[0])||void 0===o?void 0:o.totalConfirmed)&&void 0!==a?a:0,totalDeaths:null!==(i=null===(l=t[0])||void 0===l?void 0:l.totalDeaths)&&void 0!==i?i:0,totalRecovered:null!==(n=null===(r=t[0])||void 0===r?void 0:r.totalRecovered)&&void 0!==n?n:0},this.__lastUpdate=Date.now(),this.cache[s]}catch{this.cache[s]={status:"failed"}}return this.dispatchEvent(new Event("change")),this.cache[s]}return this.cache[s]}}},x={url:new URL("./src/services/countryDetailService.js",document.baseURI).href};const E=new class extends t{constructor(){super(),this.cache={}}async getDetails(t){var e;let{iso2:s}=t;if(s=encodeURI(s),/^[a-zA-Z]{2}$/.test(s)){if(t.forceRefresh||this._shouldInvalidate()||"failed"===(null===(e=this.cache[s])||void 0===e?void 0:e.status)||!this.cache[s]){try{this.cache[s]={};const t=await(await fetch(new URL(`../../data/territories/${s}.json`,x.url))).json(),e={};for(const s of Object.keys(t.lockdown.travel))for(const{label:a,value:o}of t.lockdown.travel[s])Array.isArray(e[a])?e[a].push(o):e[a]=[o];return this.cache[s]={status:"success",measures:t.lockdown.measures,travel:e,max_gathering:t.lockdown.max_gathering},this.__lastUpdate=Date.now(),this.cache[s]}catch(t){this.cache[s]={status:"failed"}}return this.dispatchEvent(new Event("change")),this.cache[s]}return this.cache[s]}}},R={url:new URL("./src/services/populationService.js",document.baseURI).href};const k=new class extends t{constructor(){super(),this.cache={}}async getPopulation(t){var e;if(t||!this.__population)try{this.__population=await fetch(new URL("../../data/population.json",R.url)).then(t=>t.json()),await this.__population}catch{return{status:"failed"}}return this.dispatchEvent(new Event("change")),{status:"success",data:null!==(e=this.__population)&&void 0!==e?e:0}}};new class extends t{constructor(){super(),this.cache={}}async getAdvice(t){var e;let{iso2:s}=t;if(s=encodeURI(s),/^[a-zA-Z]{2}$/.test(s)){if(t.forceRefresh||"failed"===(null===(e=this.cache[s])||void 0===e?void 0:e.status)||!this.cache[s]){try{this.cache[s]={};const t=await(await fetch("https://www.travel-advisory.info/api?countrycode="+s)).json();return this.cache[s]={status:"success",advice:t.data[s].advisory.message,score:t.data[s].advisory.score+"/5"},this.cache[s]}catch(t){this.cache[s]={status:"failed"}}return this.dispatchEvent(new Event("change")),this.cache[s]}return this.cache[s]}}};const C={commerce:{text:"Commerce:"},foreigners_inbound:{text:"Foreigners (in):"},foreigners_outbound:{text:"Foreigners (out):"},local:{text:"In between cities:"},nationals_inbound:{text:"Nationals (in):"},nationals_outbound:{text:"Nationals (out):"},stopovers:{text:"Stopovers:"},cross_border_workers:{text:"Cross border workers:"},lockdown_status:{text:"Lockdown status:",icon:e},city_movement_restriction:{text:"City movement restriction:",icon:s},attending_religious_sites:{text:"Religion:",icon:a},going_to_work:{text:"Work:",icon:o},military_not_deployed:{text:"Military not deployed:",icon:i},academia_allowed:{text:"Academia allowed:",icon:l},going_to_shops:{text:"Going to shops:",icon:n},electricity_nominal:{text:"Electricity working:",icon:r},water_nominal:{text:"Water working:",icon:c},internet_nominal:{text:"Internet working:",icon:d}};class A extends HTMLElement{constructor(){super(),this._show=this._show.bind(this),this._hide=this._hide.bind(this)}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","tooltip"),this.hasAttribute("tabindex")||this.setAttribute("tabindex",-1),this._hide(),this._target=document.querySelector("[aria-describedby="+this.id+"]"),this._target&&(this._target.addEventListener("focus",this._show),this._target.addEventListener("blur",this._hide),this._target.addEventListener("mouseenter",this._show),this._target.addEventListener("mouseleave",this._hide))}disconnectedCallback(){this._target&&(this._target.removeEventListener("focus",this._show),this._target.removeEventListener("blur",this._hide),this._target.removeEventListener("mouseenter",this._show),this._target.removeEventListener("mouseleave",this._hide),this._target=null)}_show(){this.hidden=!1}_hide(){this.hidden=!0}}window.customElements.define("tool-tip",A);const U={1:"YES",2:"PARTIALLY",3:"NO",4:"UNCLEAR",5:"NA"},j={1:"YES",2:"PARTIAL",3:"NO",4:"UNCLEAR"},D=["Land","Flight","Sea"];export default class extends u{async componentWillMount(){this.setState({coronaData:await L.getCountry({iso2:this.props.iso2}),populationData:await k.getPopulation(),countryDetails:await E.getDetails({iso2:this.props.iso2})})}render(t,{coronaData:e,populationData:s,countryDetails:a}){var o,i,l,n,r,c,d,u;if(!navigator.onLine&&("success"!==(null==e?void 0:e.status)||"success"!==(null==s||null===(u=s.data)||void 0===u?void 0:u.status)||"success"!==(null==a?void 0:a.status)))return h("div",{class:p},v,h("b",null,"You are not connected to the internet"),h("p",null,"Information for this country can't be displayed because you are currently offline. Please check your internet connection."));return e||s||a||!navigator.onLine?h("div",{class:w},h("hr",null),h("div",{class:"dialog"},h("h2",null,"Stats"),h("dl",null,h("div",{class:"data-entry"},h("dt",null,"Population:"),h("dd",{class:"data-value"},null!==(o=Number(null==s||null===(i=s.data)||void 0===i||null===(l=i[this.props.iso2])||void 0===l?void 0:l.Population).toLocaleString())&&void 0!==o?o:"Error")),h("div",{class:"data-entry"},h("dt",null,"Reported cases:"),h("dd",{class:"data-value"},null!==(n=Number(null==e?void 0:e.totalConfirmed).toLocaleString())&&void 0!==n?n:"Error")),h("div",{class:"data-entry"},h("dt",null,"Reported deaths:"),h("dd",{class:"data-value"},null!==(r=Number(null==e?void 0:e.totalDeaths).toLocaleString())&&void 0!==r?r:"Error")),h("div",{class:"data-entry"},h("dt",null,"Reported recoveries:"),h("dd",{class:"data-value"},null!==(c=Number(null==e?void 0:e.totalRecovered).toLocaleString())&&void 0!==c?c:"Error")),h("div",{class:"data-entry"},h("dt",null,"Max gathering:"),h("dd",{class:"data-value"},null!==(d=null==a?void 0:a.max_gathering)&&void 0!==d?d:"Unknown")))),h("hr",null),"success"===a.status?[h("div",{class:"dialog"},h("h2",null,"Measures"),h("dl",null,a.measures.map(({label:t,value:e},s)=>{var a,o,i,l,n,r,c;return h("div",{class:"ld-measures-wrapper"},h("dt",{class:"ld-measures"},h("span",{class:"ld-measures-icon"},C[t].icon),h("span",{class:"ld-measures-key"},C[t].text)),h("dd",{"aria-describedby":"ld-measures-"+s+"-"+(null!==(a=j[e])&&void 0!==a?a:j[4]),"aria-label":null!==(o=null===(i=j[e])||void 0===i?void 0:i.toLowerCase())&&void 0!==o?o:j[4],class:"ld-measures-value ld-measures-"+(null!==(l=j[e])&&void 0!==l?l:j[4])}),h("tool-tip",{class:"tooltip",id:"ld-measures-"+s+"-"+(null!==(n=j[e])&&void 0!==n?n:j[4])},null!==(r=null===(c=j[e])||void 0===c?void 0:c.toLowerCase())&&void 0!==r?r:j[4].toLowerCase()))}))),h("hr",null),h("div",{class:"dialog"},h("h2",null,"Travel"),h("dl",null,h("div",{class:"ld-travel"},h("dt",null),h("div",{class:"ld-travel--values"},h("dd",{class:"ld-travel--symbol ld-travel--val-icon"},y),h("dd",{class:"ld-travel--symbol ld-travel--val-icon"},f),h("dd",{class:"ld-travel--symbol ld-travel--val-icon"},g))),Object.keys(a.travel).map((t,e)=>h("div",{class:"ld-travel"},h("dt",null,C[t].text),h("div",{class:"ld-travel--values"},a.travel[t].map((t,s)=>{var a,o,i,l,n,r,c,d,u;return h("dd",{"aria-describedby":"ld-travel-"+s+"-"+e+"-"+(null!==(a=null===(o=U[t])||void 0===o?void 0:o.toLowerCase())&&void 0!==a?a:U[4]),"aria-label":D[s]+": "+(null!==(i=null===(l=U[t])||void 0===l?void 0:l.toLowerCase())&&void 0!==i?i:U[4]),class:"ld-travel--symbol ld-travel--val-"+(null!==(n=U[t])&&void 0!==n?n:U[5]),style:"position: relative;"},h("tool-tip",{class:"tooltip",id:"ld-travel-"+s+"-"+e+"-"+(null!==(r=null===(c=U[t])||void 0===c?void 0:c.toLowerCase())&&void 0!==r?r:U[4])},null!==(d=null===(u=U[t])||void 0===u?void 0:u.toLowerCase())&&void 0!==d?d:U[4].toLowerCase()))}))))))]:h("div",{class:"dialog"},h("h2",null,"Measures"),"Failed to get data for this country."),h("hr",null),h("div",{class:"dialog ld-contribute"},h("a",{class:"ld-link",target:"_blank",rel:"noopener noreferrer",href:"https://docs.google.com/forms/d/e/1FAIpQLSfDWe2qlzUnd3e-YYspMzT9adUswDEYIdJMb7jz7ule34-yiA/viewform"},"Improve this data"))):h("div",{class:_},m)}}
